---
import BaseLayout from '@layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf());
const formatDate = (value: Date) => new Intl.DateTimeFormat('zh-CN', { dateStyle: 'medium' }).format(value);
---
<BaseLayout title="博客" description="阅读关于工具隐私、最佳实践与扩展计划的文章。">
  <section class="flex flex-col gap-8">
    <div class="flex flex-col gap-4">
      <h1 class="text-3xl font-semibold text-white md:text-4xl">博客</h1>
      <p class="max-w-2xl text-base text-slate-200">
        在此记录工具站点的隐私原则、构建心得与未来规划。
      </p>
    </div>
    <div class="flex flex-col gap-6">
      {posts.map((post) => (
        <article class="rounded-2xl border border-white/10 bg-slate-900/60 p-6 transition hover:border-accent">
          <h2 class="text-xl font-semibold text-white">
            <a class="hover:text-accent" href={`/blog/${post.slug}/`}>{post.data.title}</a>
          </h2>
          <time class="mt-2 block text-xs uppercase tracking-wide text-slate-400">
            {formatDate(post.data.publishDate)}
          </time>
          <p class="mt-3 text-sm text-slate-200">{post.data.description}</p>
        </article>
      ))}
    </div>
  </section>
</BaseLayout>
