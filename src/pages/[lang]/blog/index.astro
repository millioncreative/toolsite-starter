---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import { getDictionary, isLocale } from '../../../i18n';
import type { Locale } from '../../../i18n/config';

export const prerender = true;

// 仅生成 en/zh 两个列表页
export function getStaticPaths() {
  return ['en', 'zh'].map((lang) => ({ params: { lang } }));
}

const { lang } = Astro.params as { lang: Locale };

if (!isLocale(lang)) {
  return Astro.redirect('/zh/blog/');
}

const locale = lang;
const dict = await getDictionary(locale);

// ⚠️ 临时：不访问 content collection，直接列出已知文章 slug
const POSTS = ['getting-started', 'workflow-tips'];
---

<BaseLayout lang={locale} dict={dict} title={dict.nav.blog}>
  <section class="blog">
    <h1>{dict.sections.latestArticles}</h1>
    <ul>
      {POSTS.map((slug) => (
        <li><a href={`/${locale}/blog/${slug}/`}>{slug}</a></li>
      ))}
    </ul>
  </section>
</BaseLayout>
